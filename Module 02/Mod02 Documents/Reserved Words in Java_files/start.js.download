//----------------------------------------------------------------------
// -- REQUIRE SETUP, CSS Importer:
// ----------------------------------------------------------------------
// -- NOTE: Do not edit this file unless you are a WDS team member.
// -- ABOUT: This file loads all libraries and creates each page.
// -- Authors/Assembler: jmullins@flvs.net
// ======================================================================


//===========================================================
//CSS loader and array cleaner
function cleanArray(actual) {
	var newArray = new Array();
	for (var i = 0; i < actual.length; i++) {
		if (actual[i]) {
			newArray.push(actual[i]);
		}
	}
	return newArray;
}

function loadCss(url) {
	var link = document.createElement("link");
	link.type = "text/css";
	link.rel = "stylesheet";
	link.href = url;
	document.getElementsByTagName("head")[0].appendChild(link);
}

var suffixStamp = '05282019151329';
//Require jQuery
//===============================================================================================
//use url_fromGlobalFolders since this file is in the global/scripts folder


require.config({
	waitSeconds: 0,
  paths: {
		//version 1
        'jQuery': 'jquery-2.1.0.min',
        'plugins_min': 'plugins/jquery.plugins.concat',
        'bootstrap': 'bootstrap.min',
        'bootstrapAccess': 'bootstrap-accessibility.min',
        'coreJS': 'core_master.min', //***************jquery-2.1.0 and bootstrap 3 ******//
        'mediaelement': 'plugins/mediaelement-and-player.min',
        'lib': 'flvs_lib-4.0',
        'core': 'flvs_core-4.0',
        'scripts_min': 'flvs_master.min', //**************flvs_lib-4.0 and flvs_core-4.0 ******//
        'interactives': 'importer',
        'setup': 'setup',
        'home_setup': 'home_mod',
        'cheatsheet_setup': 'cheat_mod',
        'components': 'components',

        //Version 1
        'jQuery3': '../versions/1/dist/js/jquery-3.3.1.min',
        'bootstrap4': '../versions/1/dist/js/bootstrap.bundle.min',
		'coreV1': '../versions/1/js/core',//in gulp build
        'coreV1min':'../versions/1/dist/js/version1-min',//the gulp build
        'xml2jsonV1': 'plugins/jquery.xml2json',//in gulp build
        'setupV1': '../versions/1/js/setup',//in gulp build
        'cheatsheet_setup1': '../versions/1/js/cheat_mod',

        //common js files
		'googleUA': 'analytics_mod',
		'jqMath': 'plugins/jqmath-etc-0.4.0.min',
        'xml2json': 'plugins/jquery.xml2json',
        'glossary': 'glossary',
        'language': 'language',
        'jQueryUI': 'jquery-ui-1.10.4.custom.min',

        //'colorbox': 'plugins/jquery.colorbox-min',
		//'roundabout': 'plugins/jquery.roundabout.min',
		//'slides': 'plugins/jquery.slides.min',
		//'swfobject': 'plugins/jquery.swfobject.1-1-1.min',
		//'jstween': 'plugins/jstween-1.1.min',

		//LOCALS//
		'local_language': url_forRequire+'/language',
		'local_course': url_forRequire+'/course',
		'local_home': url_forRequire+'/home',
		'local_analytics': url_forRequire+'/analytical',
		//INTERACTIVE PLUGINS//
		'ui_quiz' : 'il/custom_plugins/ui_quiz',
		'jMatch' : 'il/custom_plugins/jquery.ui.jmatch',
		'jMatch_v2' : 'il/custom_plugins/jquery.ui.jmatch_v2',
		'jTimeline' : 'il/custom_plugins/jquery.ui.jtimeline',
		'jFlipbook' : 'il/custom_plugins/jquery.ui.jflipbook',
		'jqCloud' : 'il/custom_plugins/jquery.ui.jqcloud',
		'jFlipCard' : 'il/custom_plugins/jquery.ui.cardflip',
		'jCardstack' : 'il/custom_plugins/jquery.ui.cardStack',
		'jDragDrop' : 'il/custom_plugins/jquery.ui.drag_and_drop',
		'jDragDrop_v2' : 'il/custom_plugins/jquery.ui.drag_and_drop_v2',
		'iPicture' : 'il/custom_plugins/jquery.iPicture',
		'_map' : 'il/custom_plugins/jquery.ui.mapper',
		'jCrossword' : 'il/custom_plugins/jquery.ui.slide_crossword',
		'jCustom' : 'il/custom_plugins/jCustom',

		
    },
  shim: {
        'coreJS': { exports: '$' },
		// %mins------------------------------     'xml2json': ['jQuery'],
		'xml2json': ['coreJS'],
		// %mins------------------------------     'plugins_min': ['jQuery'],
		'plugins_min': ['coreJS'],
		// %mins------------------------------     'bootstrapAccess': ['bootstrap'],
		'bootstrapAccess': ['coreJS'],
		// %mins------------------------------     'setup': ['bootstrap', 'xml2json'],
		'setup': ['coreJS', 'xml2json'],
		// %mins------------------------------     'interactives':['lib','core']
		'interactives':['scripts_min'],
        //*************************************************************//
		//**************   Version 1 dependecies   ********************//
        'jQuery3': { exports: '$' },
        //'xml2jsonV1': ['jQuery3'], //in gulp build
        'bootstrap4': ['jQuery3'],
        'coreV1min':['bootstrap4']
    },
  urlArgs: suffixStamp
});

//turn of analytics
//FLVS.settings.use_analytics = false;

if(typeof CBFversion === 'undefined' || CBFversion === "1"){
// %mins------------------------------     require(['jQuery', 'xml2json', 'plugins_min', 'bootstrap', 'setup'], function ($, plugins_min, bootstrap, setup) {
    require(['coreJS', 'xml2json', 'plugins_min', 'setup'], function ($, xml2json, plugins_min, setup) {

        if(typeof include_math !== 'undefined' && include_math === true){
            require(['jqMath'], function (jqMath){});
            loadCss(url_fromGlobal + '/css/jqmath-0.4.0.css');
            //loadCss("http://fonts.googleapis.com/css?family=UnifrakturMaguntia", "head");

        }

        if(typeof include_ui !== 'undefined' && include_ui === true){
            require(['jQueryUI'], function (jQueryUI){
                $(this).trigger('jqueryui_loaded');
            });
            loadCss(url_fromGlobal + '/css/ilskin/jquery-ui-1.10.4.custom.min.css');
        }


        require(['bootstrapAccess'], function (bootstrapAccess){});

    });



}else if(CBFversion === "2"){

    require(['jQuery3', 'bootstrap4', 'coreV1min'], function ($, bootstrap4, coreV1min) {
    //require(['jQuery3', 'xml2jsonV1', 'bootstrap4', 'setupV1'], function ($, xml2jsonV1, bootstrap4, setupV1) {

        if(typeof include_ui !== 'undefined' && include_ui === true){
            require(['jQueryUI'], function (jQueryUI){
                $(this).trigger('jqueryui_loaded');
            });
            loadCss(url_fromGlobal + '/css/ilskin/jquery-ui-1.10.4.custom.min.css');
        }
    });

}